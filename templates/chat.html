{% extends "base.html" %}
{% block content %}

<h3>Chat with {{ user.username }}</h3>

<div class="border p-3 mb-3 bg-light" style="height:350px; overflow-y:auto; border-radius:8px;">
    {% for m in messages %}
        <div class="mb-3 {% if m.sender_id == current_user.id %}text-end{% endif %}">
            <p class="mb-1">
                <strong>
                    {% if m.sender_id == current_user.id %}
                        You
                    {% else %}
                        {{ user.username }}
                    {% endif %}
                </strong>
                <br>
                {{ m.content }}
            </p>
            <small class="text-muted">{{ m.timestamp }}</small>
            <hr>
        </div>
    {% endfor %}
</div>

<form method="POST">
    <textarea name="content"
              class="form-control mb-2"
              placeholder="Type your message..."
              required></textarea>

    <button type="submit" class="btn btn-primary w-100">Send</button>
</form>

{% endblock %}
